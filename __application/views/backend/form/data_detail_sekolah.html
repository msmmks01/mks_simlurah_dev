<form
  id="form_{$acak}"
  method="post"
  url="{$host}backoffice-simpan/data_detail_sekolah"
  enctype="multipart/form-data"
>
  <input type="hidden" name="id" value="{$data.id|default:''}" />
  <input type="hidden" name="editstatus" value="{$sts|default:'add'}" />

  <div class="row">
    <div class="col-md-12">
      <div class="box box-primary">
        <div class="box-header with-border">
          <h3 class="box-title">Form Isian</h3>
        </div>
        <div class="box-body">
          <div class="row">
            <div class="col-md-12">
             
              <div class="row" style="margin-bottom: 10px">                
                
                <div class="col-md-6">
                  {include file="backend/template/input_form.html" 
                  label="NPSN" class_width="col-lg-12" type="select2" 
                  required="true" name="npsn" id="npsn"
                  option={$list_npsn|default:''} }
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Tahun Ajaran" 
                  class_width="col-lg-12" type="text" required="true"
                  name="thn_ajar" id="thn_ajar" placeholder="contoh: 2023/2024"
                  value="{$data.thn_ajar|default:''}"}
                </div>
              </div>
              <div class="row" style="margin-bottom: 10px"> 
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Jumlah Peserta Didik" 
                  class_width="col-lg-12" class="angka" type="angka" required="true"
                  name="pd" id="pd"
                  value="{$data.pd|default:''}"}
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Jumlah Rombel" 
                  class_width="col-lg-12" class="angka" type="angka" required="true"
                  name="rombel" id="rombel"
                  value="{$data.rombel|default:''}"}
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Jumlah Guru" 
                  class_width="col-lg-12" class="angka" type="angka" required="true"
                  name="guru" id="guru"
                  value="{$data.guru|default:''}"}
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Jumlah Pegawai" 
                  class_width="col-lg-12" class="angka" type="angka" required="true"
                  name="pegawai" id="pegawai"
                  value="{$data.pegawai|default:''}"}
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Jumlah R. Kelas" 
                  class_width="col-lg-12" class="angka" type="angka" required="true"
                  name="r_kelas" id="r_kelas"
                  value="{$data.r_kelas|default:''}"}
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Jumlah R. Lab" 
                  class_width="col-lg-12" class="angka" type="angka" required="true"
                  name="r_lab" id="r_lab"
                  value="{$data.r_lab|default:''}"}
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="Jumlah R. Perpus" 
                  class_width="col-lg-12" class="angka" type="angka" required="true"
                  name="r_perpus" id="r_perpus"
                  value="{$data.r_perpus|default:''}"}
                </div>
              </div>

              <!-- <div class="row">
								<div class='col-md-12'>
									<fieldset class='form-group'>
										<legend style='border-color:#E17A35 !important;border-width:3px !important;padding:5px;color:#E17A35;font-weight:bold;font-size:16px;margin-bottom:5px;margin-top:15px;'>STATUS DATA</legend>
									</fieldset>
								</div>
								<div class="col-md-2">
									{include file="backend/template/input_form.html" required="true" label="Status" class_width="col-lg-12" type="select" name="status_data" id="status_data" option={$status_data|default:''} }
								</div>
							</div> -->

              <div class="row">
                <div class="col-md-12"> 
                  <hr />
                  <br />
                  {include file="backend/template/button_save.html"
                  text="Simpan" id_na="save" style_btn="btn-success"
                  btn_goyz="false"} {include
                  file="backend/template/button_save.html" text="Kembali"
                  click="$('#grid_nya_{$mod}').show();$('#detil_nya_{$mod}').hide();"
                  id_na="cancel" style_btn="btn-danger" btn_goyz="true"}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>

<script>
  var rulesnya = {
    npsn: "required",
    thn_ajar: "required",
    pd: "required",
    rombel: "required",
    guru: "required",
    pegawai: "required",
    r_kelas: "required",
    r_lab: "required",
    r_perpus: "required"
  };

  $(".angka").autoNumeric("init", {
    aSep: ".",
    aDec: ",",
    mDec: "0",
  });

  var messagesnya = {
    npsn: "<i style='color:red'>Harus Diisi</i>",
    thn_ajar: "<i style='color:red'>Harus Diisi</i>",
    pd: "<i style='color:red'>Harus Diisi</i>",
    rombel: "<i style='color:red'>Harus Diisi</i>",
    guru: "<i style='color:red'>Harus Diisi</i>",
    pegawai: "<i style='color:red'>Harus Diisi</i>",
    r_kelas: "<i style='color:red'>Harus Diisi</i>",
    r_lab: "<i style='color:red'>Harus Diisi</i>",
    r_perpus: "<i style='color:red'>Harus Diisi</i>"
  };

  $("#form_{$acak}").validate({
    rules: rulesnya,
    messages: messagesnya,
    submitHandler: function (form) {
      if ($("#npsn").val() == "") {
        $("#npsn").focus();
        return false;
      }
      $.LoadingOverlay("show");
      submit_form("form_{$acak}", function (r) {
        if (r == 1) {
          $.messager.alert(nama_apps, "Data Tersimpan", "info");
          $("#cancel_{$acak}").trigger("click");
          $("#grid_data_detail_sekolah").datagrid("reload");
        } else {
          $.messager.alert(
            nama_apps,
            "Proses Simpan Data Gagal " + r,
            "warning"
          );
        }
        $.LoadingOverlay("hide", true);
      });
    },
    errorPlacement: function (error, element) {
      var name = element.attr("name");
      var errorSelector = '.validation_error_message[for="' + name + '"]';
      var $element = $(errorSelector);
      if ($element.length) {
        $(errorSelector).html(error.html());
      } else {
        error.insertAfter(element);
      }
    },
  });
</script>
