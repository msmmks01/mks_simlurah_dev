<form id="form_{$acak}" method="post" url="{$host}backoffice-simpan/data_pkl" enctype="multipart/form-data" >
    <input type="hidden" name="id" value="{$data.id|default:''}">
	<input type="hidden" name="editstatus" value="{$sts|default:'add'}">

	<div class="row">
		<div class="col-md-12">
			<div class="box box-primary">
				<div class="box-header with-border">
					<h3 class="box-title">Form Isian</h3>
				</div>
				<div class="box-body">
					<div class="row">
						<div class="col-md-12">

							<div class="row" style="margin-bottom:10px;">
                                <div class="col-md-4">
									{include file="backend/template/input_form.html" label="Nama" class_width="col-lg-12" type="text" name="nama" id="nama" value="{$data.nama|default:''}"}
								</div>
                                <div class="col-md-4">
									{include file="backend/template/input_form.html" label="NIK" class_width="col-lg-12" type="pnj_karakter" name="nik_pkl" id="nik_pkl" value="{$data.nik_pkl|default:''}"}
								</div>
                                <div class="col-md-4">
									{include file="backend/template/input_form.html" label="No. Telp/HP" class_width="col-lg-12" type="pnj_hp" name="no_telp" id="no_telp" value="{$data.no_telp|default:''}"}
								</div>
							</div>
                            <div class="row" style="margin-bottom:10px;">
                                <div class="col-md-8">
									{include file="backend/template/input_form.html" label="Alamat" class_width="col-lg-12" type="text" name="alamat" id="alamat" value="{$data.alamat|default:''}"}
								</div>
                                <div class="col-md-4">
									{include file="backend/template/input_form.html" required="true" label="Kelurahan" class_width="col-lg-12" type="baca_aja" name="cl_kelurahan_desa_id" id="cl_kelurahan_desa_id" value="{$kel.nama|default:''}" }
								</div>
								
                            </div>
                            <div class="row" style="margin-bottom:10px;">
                                <div class="col-md-4">
									{include file="backend/template/input_form.html" label="Tempat Usaha" class_width="col-lg-12" type="text" name="tempat_usaha" id="tempat_usaha" value="{$data.tempat_usaha|default:''}"}
								</div>
                                <div class="col-md-3">
									{include file="backend/template/input_form.html" label="Jenis Usaha" class_width="col-lg-12" type="text" name="jenis_usaha" id="jenis_usaha" value="{$data.jenis_usaha|default:''}"}
								</div>
                                <div class="col-md-2">
									{include file="backend/template/input_form.html" label="Lamanya Usaha" class_width="col-lg-12" type="text" name="lamanya_usaha" id="lamanya_usaha" value="{$data.lamanya_usaha|default:''}"}
								</div>
                                <div class="col-md-3">
									{include file="backend/template/input_form.html" label="Nama Usaha" class_width="col-lg-12" type="text" name="nama_usaha_pkl" id="nama_usaha_pkl" value="{$data.nama_usaha_pkl|default:''}"}
								</div>
                            </div>

							<div class="row">
								<div class="col-md-12">
									<hr/>
									{include file="backend/template/input_form.html" label="Upload File *jpg|jpeg|png|pdf" class_width="col-lg-12" type="file" name="file" id="file" value="{$data.file|default:''}"}
									<br/>
									{include file="backend/template/button_save.html" text="Simpan" id_na="save" style_btn="btn-success"  btn_goyz="false"}
									{include file="backend/template/button_save.html" text="Kembali" click="$('#grid_nya_{$mod}').show();$('#detil_nya_{$mod}').hide();" id_na="cancel" style_btn="btn-danger"  btn_goyz="true"}
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</form>

<script>

	$('#no_telp').on('keyup', function() {
		if (this.value.length < 10) {
			document.getElementById("no_telp").style.borderColor = "red";
		}else{
			document.getElementById("no_telp").style.borderColor = "green";
		}
		
	});
	var rulesnya = {
		nama : "required",
		no_telp : "required",
		alamat : "required",
		cl_kelurahan_desa_id : "required",
		kecamatan : "required",
		tempat_usaha : "required",
		jenis_usaha : "required",
		lamanya_usaha : "required",
		waktu_operasional : "required"
	};

	$('.angka').autoNumeric('init', {
		aSep : '.',
		aDec: ',',
		mDec: '0'
	});


	var messagesnya = {
		nama : "<i style='color:red'>Harus Diisi</i>",
		no_telp : "<i style='color:red'>Harus Diisi</i>",
		alamat : "<i style='color:red'>Harus Diisi</i>",
		cl_kelurahan_desa_id : "<i style='color:red'>Harus Diisi</i>",
		kecamatan : "<i style='color:red'>Harus Diisi</i>",
		tempat_usaha : "<i style='color:red'>Harus Diisi</i>",
		jenis_usaha : "<i style='color:red'>Harus Diisi</i>",
		lamanya_usaha : "<i style='color:red'>Harus Diisi</i>",
		waktu_operasional : "<i style='color:red'>Harus Diisi</i>"
	}

	$( "#form_{$acak}" ).validate( {
		rules: rulesnya,
		messages: messagesnya,
		submitHandler: function(form) {
			var cek = $('#no_telp').val();
			var pnj = cek.length;
			if (pnj < 6) {
				$.messager.alert(nama_apps,'Nomor Telp/HP tidak valid ','error');
			}else{
			$.LoadingOverlay("show");
			submit_form('form_{$acak}',function(r){
				if(r == 1 ){
					$.messager.alert(nama_apps,'Data Tersimpan','info');
					$('#cancel_{$acak}').trigger('click');
					$('#grid_data_pkl').datagrid('reload');
				}else{
					$.messager.alert(nama_apps,'Proses Simpan Data Gagal '+r,'warning');
				}
				$.LoadingOverlay("hide", true);
			});
		}
			//*/
		},
		errorPlacement: function(error, element) {
	        var name = element.attr('name');
	        var errorSelector = '.validation_error_message[for="' + name + '"]';
	        var $element = $(errorSelector);
	        if ($element.length) {
	            $(errorSelector).html(error.html());
	        } else {
	            error.insertAfter(element);
	        }
	    }
	} );
</script>
