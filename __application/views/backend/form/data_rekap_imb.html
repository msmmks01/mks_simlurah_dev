<form
  id="form_{$acak}"
  method="post"
  url="{$host}backoffice-simpan/data_rekap_imb"
  enctype="multipart/form-data"
>
  <input type="hidden" name="id" value="{$data.id|default:''}" />
  <input type="hidden" name="editstatus" value="{$sts|default:'add'}" />

  <div class="row">
    <div class="col-md-12">
      <div class="box box-primary">
        <div class="box-header with-border">
          <h3 class="box-title">Form Isian</h3>
        </div>
        <div class="box-body">
          <div class="row">
            <div class="col-md-12">
              <div class="row" style="margin-bottom: 10px">
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="No.
                  Reg Lurah" class_width="col-lg-12" type="text"
                  name="no_reg_lurah_imb" id="no_reg_lurah_imb"
                  value="{$data.no_reg_lurah_imb|default:''}"}
                </div>
                <div class="col-md-2">
                  {include file="backend/template/input_form.html" label="No.
                  Reg Camat" class_width="col-lg-12" type="text"
                  name="no_reg_camat_imb" id="no_reg_camat_imb"
                  value="{$data.no_reg_camat_imb|default:''}"}
                </div>
                <div class="col-md-4">
                  {include file="backend/template/input_form.html" label="Nama
                  Pemohon" class_width="col-lg-12" type="text"
                  name="nama_pemohon_imb" id="nama_pemohon_imb"
                  value="{$data.nama_pemohon_imb|default:''}"}
                </div>
                <div class="col-md-4">
                  {include file="backend/template/input_form.html" label="Alamat
                  Pemohon" class_width="col-lg-12" type="text"
                  name="alamat_pemohon_imb" id="alamat_pemohon_imb"
                  value="{$data.alamat_pemohon_imb|default:''}"}
                </div>
              </div>
              <div class="row" style="margin-bottom: 10px">
                <div class="col-md-12">
                  <fieldset class="form-group">
                    <legend
                      style="
                        border-color: #e17a35 !important;
                        border-width: 3px !important;
                        padding: 5px;
                        color: #e17a35;
                        font-weight: bold;
                        font-size: 16px;
                        margin-bottom: 5px;
                        margin-top: 15px;
                      "
                    ></legend>
                  </fieldset>
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html" label="Alamat
                  Bangunan" class_width="col-lg-12" type="text"
                  name="alamat_bangunan_imb" id="alamat_bangunan_imb"
                  value="{$data.alamat_bangunan_imb|default:''}"}
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html" label="Surat
                  Tanah/Luas Tanah" class_width="col-lg-12" type="text"
                  name="luas_tanah_imb" id="luas_tanah_imb"
                  value="{$data.luas_tanah_imb|default:''}"}
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html" label="Nama
                  Pada Surat Tanah" class_width="col-lg-12" type="text"
                  name="nama_surat_tanah_imb" id="nama_surat_tanah_imb"
                  value="{$data.nama_surat_tanah_imb|default:''}"}
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html"
                  label="Nomor/TGL Surat Tanah" class_width="col-lg-12"
                  type="text" name="no_tgl_imb" id="no_tgl_imb"
                  value="{$data.no_tgl_imb|default:''}"}
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  {include file="backend/template/input_form.html"
                  required="true" label="Kelurahan" class_width="col-lg-12"
                  type="baca_aja" name="cl_kelurahan_desa_id"
                  id="cl_kelurahan_desa_id" value="{$kel.nama|default:''}"}
                </div>
                <div class="col-md-4">
                  {include file="backend/template/input_form.html"
                  label="Kecamatan" class_width="col-lg-12" type="baca_aja"
                  name="kecamatan" id="kecamatan"
                  value="{$kec.nama|default:''}"}
                </div>
                <div class="col-md-4">
                  {include file="backend/template/input_form.html"
                  label="Penggunaan/Fungsi Bangunan Gedung"
                  class_width="col-lg-12" type="text" name="fungsi_gedung_imb"
                  id="fungsi_gedung_imb"
                  value="{$data.fungsi_gedung_imb|default:''}"}
                </div>
              </div>
              <div class="row" style="margin-bottom: 10px">
                <div class="col-md-12">
                  <fieldset class="form-group">
                    <legend
                      style="
                        border-color: #e17a35 !important;
                        border-width: 3px !important;
                        padding: 5px;
                        color: #e17a35;
                        font-weight: bold;
                        font-size: 16px;
                        margin-bottom: 5px;
                        margin-top: 15px;
                      "
                    ></legend>
                  </fieldset>
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html" label="Jenis
                  Kegiatan" class_width="col-lg-12" type="text"
                  name="jenis_kegiatan_imb" id="jenis_kegiatan_imb"
                  value="{$data.jenis_kegiatan_imb|default:''}"}
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html" label="Kelas
                  Bangunan/Lantai" class_width="col-lg-12" type="text"
                  name="bangunan_imb" id="bangunan_imb"
                  value="{$data.bangunan_imb|default:''}"}
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html" label="Jumlah
                  Bangunan" class_width="col-lg-12" type="text"
                  name="jml_bangunan_imb" id="jml_bangunan_imb"
                  value="{$data.jml_bangunan_imb|default:''}"}
                </div>
                <div class="col-md-3">
                  {include file="backend/template/input_form.html" label="Nomor
                  Bangunan" class_width="col-lg-12" type="text"
                  name="no_bangunan_imb" id="no_bangunan_imb"
                  value="{$data.no_bangunan_imb|default:''}"}
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  {include file="backend/template/input_form.html"
                  label="Keterangan Lain" class_width="col-lg-12" type="text"
                  name="ket_lain_imb" id="ket_lain_imb"
                  value="{$data.ket_lain_imb|default:''}"}
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr />
                  {include file="backend/template/input_form.html" label="Upload
                  File *jpg|jpeg|png|pdf" class_width="col-lg-12" type="file"
                  name="file" id="file" value="{$data.file|default:''}"}
                  <br />
                  {include file="backend/template/button_save.html"
                  text="Simpan" id_na="save" style_btn="btn-success"
                  btn_goyz="false"} {include
                  file="backend/template/button_save.html" text="Kembali"
                  click="$('#grid_nya_{$mod}').show();$('#detil_nya_{$mod}').hide();"
                  id_na="cancel" style_btn="btn-danger" btn_goyz="true"}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>

<script>
  var rulesnya = {
    nama_pemohon_imb: "required",
    alamat_pemohon_imb: "required",
    alamat_bangunan_imb: "required",
    luas_tanah_imb: "required",
    nama_surat_tanah_imb: "required",
    no_tgl_imb: "required",
    jenis_kegiatan_imb: "required",
  };

  $(".angka").autoNumeric("init", {
    aSep: ".",
    aDec: ",",
    mDec: "0",
  });

  var messagesnya = {
    nama_pemohon_imb: "<i style='color:red'>Harus Diisi</i>",
    alamat_pemohon_imb: "<i style='color:red'>Harus Diisi</i>",
    alamat_bangunan_imb: "<i style='color:red'>Harus Diisi</i>",
    luas_tanah_imb: "<i style='color:red'>Harus Diisi</i>",
    nama_surat_tanah_imb: "<i style='color:red'>Harus Diisi</i>",
    no_tgl_imb: "<i style='color:red'>Harus Diisi</i>",
    jenis_kegiatan_imb: "<i style='color:red'>Harus Diisi</i>",
  };

  $("#form_{$acak}").validate({
    rules: rulesnya,
    messages: messagesnya,
    submitHandler: function (form) {
      $.LoadingOverlay("show");
      submit_form("form_{$acak}", function (r) {
        if (r == 1) {
          $.messager.alert(nama_apps, "Data Tersimpan", "info");
          $("#cancel_{$acak}").trigger("click");
          $("#grid_data_imb").datagrid("reload");
        } else {
          $.messager.alert(
            nama_apps,
            "Proses Simpan Data Gagal " + r,
            "warning"
          );
        }
        $.LoadingOverlay("hide", true);
      });
      //*/
    },
    errorPlacement: function (error, element) {
      var name = element.attr("name");
      var errorSelector = '.validation_error_message[for="' + name + '"]';
      var $element = $(errorSelector);
      if ($element.length) {
        $(errorSelector).html(error.html());
      } else {
        error.insertAfter(element);
      }
    },
  });
</script>
